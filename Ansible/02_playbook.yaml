---
- name: 'Servidor Web Nginx'
  #hosts: localhost
  hosts: servidorwebNginx
  remote_user: Javk13
  become: true
  vars_files:
    #- vars/00_vars.yaml
    - vars/01_vars.yaml
    #- vars/02_vars.yaml
  tasks:

    - name: Run command if /path/to/database does not exist (with 'cmd' parameter)
      ansible.builtin.command: 'az aks get-credentials --resource-group CasoPractico --name clusterAKS --overwrite-existing' 

    - name: 'Instalaci√≥n de dependencias de 01_vars.yaml'
      ansible.builtin.yum: #Compatible con 2.9
      ##yum: # para ansible 2.9
        name: "{{ paquetes }}"
        state: latest

    - name: Create a Deployment by reading the definition from a local file
      kubernetes.core.k8s:
        state: present
        src: /home/Javk13/webAKS
        #src: /home/javier/Documentos/DevOps-Unir/Caso_practico_2/casoPractico2/nginx.yaml #
